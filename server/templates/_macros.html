{% macro nav_links(user, active_page) %}
<div class="flex-none gap-2 items-center hidden md:flex">
    {% if user.is_admin %}
    <div class="tabs tabs-boxed bg-base-200">
        <a href="/ui/admin/users" class="tab tab-sm{% if active_page == "users" %} tab-active{% endif %}">Users</a>
        <a href="/ui/caches" class="tab tab-sm{% if active_page == "caches" %} tab-active{% endif %}">Caches</a>
        <a href="/ui/tokens" class="tab tab-sm{% if active_page == "tokens" %} tab-active{% endif %}">Tokens</a>
    </div>
    {% endif %}
    <div class="dropdown dropdown-end">
        <div tabindex="0" role="button" class="btn btn-ghost btn-circle avatar online placeholder">
            <div class="bg-gradient-to-br from-primary to-secondary text-primary-content w-10 rounded-full">
                <span class="text-lg font-semibold">{% match user.display_name %}{% when Some with (name) %}{{ name.chars().next().unwrap_or('?')|upper }}{% when None %}{{ user.username.chars().next().unwrap_or('?')|upper }}{% endmatch %}</span>
            </div>
        </div>
        <ul tabindex="0" class="dropdown-content menu bg-base-100 rounded-box z-[1] w-56 p-2 shadow-xl border border-base-300">
            <li class="menu-title flex flex-row items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z" />
                </svg>
                {% match user.display_name %}{% when Some with (name) %}{{ name }}{% when None %}{{ user.username }}{% endmatch %}
            </li>
            <div class="divider my-1"></div>
            <li>
                <a href="/ui" class="flex items-center gap-2">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                    </svg>
                    Dashboard
                </a>
            </li>
            <li>
                <form method="post" action="/ui/logout" class="p-0">
                    <button type="submit" class="flex items-center gap-2 text-error w-full px-4 py-2 hover:bg-error/10 rounded-lg">
                        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-4 h-4">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                        </svg>
                        Logout
                    </button>
                </form>
            </li>
        </ul>
    </div>
</div>
{% endmacro %}

{% macro sidebar_nav(user, active_page) %}
<aside class="drawer-side z-50">
    <label for="drawer-toggle" aria-label="close sidebar" class="drawer-overlay"></label>
    <div class="menu bg-base-100 min-h-full w-72 p-4 border-r border-base-300">
        <div class="flex items-center gap-3 px-4 py-3 mb-4">
            <div class="avatar placeholder">
                <div class="bg-gradient-to-br from-primary to-secondary text-primary-content w-12 rounded-xl">
                    <span class="text-xl font-bold">{% match user.display_name %}{% when Some with (name) %}{{ name.chars().next().unwrap_or('?')|upper }}{% when None %}{{ user.username.chars().next().unwrap_or('?')|upper }}{% endmatch %}</span>
                </div>
            </div>
            <div>
                <p class="font-semibold">{% match user.display_name %}{% when Some with (name) %}{{ name }}{% when None %}{{ user.username }}{% endmatch %}</p>
                <p class="text-xs opacity-60">{% if user.is_admin %}Administrator{% else %}User{% endif %}</p>
            </div>
        </div>

        <div class="divider my-2"></div>

        <ul class="space-y-1">
            <li>
                <a href="/ui" class="{% if active_page == "dashboard" %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25" />
                    </svg>
                    Dashboard
                </a>
            </li>
            <li>
                <a href="/ui/caches" class="{% if active_page == "caches" %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125" />
                    </svg>
                    Caches
                </a>
            </li>
            <li>
                <a href="/ui/tokens" class="{% if active_page == "tokens" %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 5.25a3 3 0 013 3m3 0a6 6 0 01-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1121.75 8.25z" />
                    </svg>
                    API Tokens
                </a>
            </li>
        </ul>

        {% if user.is_admin %}
        <div class="divider my-2">
            <span class="text-xs opacity-50">ADMIN</span>
        </div>

        <ul class="space-y-1">
            <li>
                <a href="/ui/admin/users" class="{% if active_page == "users" %}active{% endif %}">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15 19.128a9.38 9.38 0 002.625.372 9.337 9.337 0 004.121-.952 4.125 4.125 0 00-7.533-2.493M15 19.128v-.003c0-1.113-.285-2.16-.786-3.07M15 19.128v.106A12.318 12.318 0 018.624 21c-2.331 0-4.512-.645-6.374-1.766l-.001-.109a6.375 6.375 0 0111.964-3.07M12 6.375a3.375 3.375 0 11-6.75 0 3.375 3.375 0 016.75 0zm8.25 2.25a2.625 2.625 0 11-5.25 0 2.625 2.625 0 015.25 0z" />
                    </svg>
                    Manage Users
                </a>
            </li>
        </ul>
        {% endif %}

        <div class="mt-auto pt-4">
            <div class="divider my-2"></div>
            <form method="post" action="/ui/logout">
                <button type="submit" class="btn btn-ghost btn-block justify-start text-error">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75" />
                    </svg>
                    Logout
                </button>
            </form>
        </div>
    </div>
</aside>
{% endmacro %}
